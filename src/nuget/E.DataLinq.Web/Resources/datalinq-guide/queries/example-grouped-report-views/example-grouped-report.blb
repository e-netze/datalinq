{"id":"example-grouped-report","name":null,"description":null,"code":"<div class=\"navbar\">\r\n  <div class=\"title\" id=\"function-title\"><a href=\"https://localhost:7277/datalinq/report/datalinq-guide@select-all-users@index\">DataLinq-Example: Grouped Report</a></div>\r\n  <div style=\"width: 30px;\"></div> \r\n</div>\r\n\r\n<div class=\"wrapper\">\r\n\r\n@{\r\n    var gruppenNachKatastralgemeinde = Model.Records \r\n        .GroupBy(r => r[\"KGNAME\"])\r\n        .OrderBy(g => g.Key);\r\n}\r\n\r\n<table>\r\n    <thead>\r\n        <tr>\r\n            <th>Gst-Nr</th>\r\n            <th>G</th>\r\n            <th>Nutzungsart</th>\r\n            <th></th>\r\n            <th></th>\r\n            <th></th>\r\n            <th></th>\r\n        </tr>\r\n    </thead>\r\n    <tbody>\r\n        @foreach (var group in gruppenNachKatastralgemeinde)\r\n        {\r\n            <tr style=\"border-bottom: 3px solid black;\">\r\n                <td colspan=\"4\" style=\"font-weight: bold;\">\r\n                    Katastralgemeinde @group.First()[\"KGNR\"] @(group.Key.ToString())\r\n                </td>\r\n                <td style=\"font-weight: bold;\">Fläche [m²]</td>\r\n                <td style=\"font-weight: bold;\">EMZ</td>\r\n                <td style=\"font-weight: bold;\">GFN</td>\r\n            </tr>\r\n            \r\n            var gruppenNachGstNr = group.GroupBy(r => r[\"GSTNR\"]).OrderBy(g => g.Key);\r\n            \r\n            foreach (var gstGroup in gruppenNachGstNr)\r\n            {\r\n                if(gstGroup.Count() > 1)\r\n                {\r\n                    var totalFläche = gstGroup.Sum(item => Convert.ToDecimal(item[\"FLAECHE\"] ?? 0));\r\n                    <tr style=\"border: none\">\r\n                        <td>\r\n                            @(gstGroup.Key.ToString())\r\n                        </td>\r\n                        <td>@gstGroup.First()[\"GRENZKATASTER\"]</td>\r\n                        <td colspan=\"1\"></td>\r\n                        <td>*</td>\r\n                        <td>@totalFläche</td>\r\n                        <td colspan=\"2\"></td>\r\n                    </tr>\r\n\r\n                    foreach (var item in gstGroup)\r\n                    {\r\n                        <tr style=\"border: none\">\r\n                            <td></td>\r\n                            <td></td>\r\n                            <td style=\"color:grey\">@item[\"NUTZUNG\"]</td>\r\n                            <td style=\"color:grey\">T</td>\r\n                            <td style=\"color:grey\">@item[\"FLAECHE\"]</td>\r\n                            <td style=\"color:grey\">@item[\"EMZ\"]</td>\r\n                            <td style=\"color:grey\">@item[\"GESCHAEFTSFALL\"]</td>\r\n                        </tr>\r\n                    }\r\n                } else {\r\n                    foreach (var item in gstGroup)\r\n                    {\r\n                        <tr style=\"border: none\">\r\n                            <td>@item[\"GSTNR\"]</td>\r\n                            <td>@item[\"GRENZKATASTER\"]</td>\r\n                            <td>@item[\"NUTZUNG\"]</td>\r\n                            <td></td>\r\n                            <td>@item[\"FLAECHE\"]</td>\r\n                            <td>@item[\"EMZ\"]</td>\r\n                            <td>@item[\"GESCHAEFTSFALL\"]</td>\r\n                        </tr>\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    </tbody>\r\n</table>\r\n\r\n</div>\r\n\r\n<style>\r\n    table {\r\n      width: 80%;\r\n      border-collapse: collapse;\r\n      margin-top: 1.5rem;\r\n      background-color: #ffffff;\r\n      border-radius: 8px;\r\n      overflow: hidden;\r\n      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);\r\n    }\r\n\r\n    thead {\r\n      background-color: #bdbdbd;\r\n      text-align: left;\r\n    }\r\n\r\n    th, td {\r\n      padding: 0.75rem 1rem;\r\n      font-size: 0.95rem;\r\n    }\r\n\r\n    th {\r\n      font-weight: 600;\r\n      color: #334155;\r\n    }\r\n\r\n    tr:hover {\r\n      background-color: #f9fafb;\r\n    }\r\n\r\n    td:last-child,\r\n    td:nth-last-child(2) {\r\n      white-space: nowrap;\r\n    }\r\n</style>","created":"2025-05-08T12:40:02","changed":"2025-05-22T11:54:05.2863681Z","test_parameters":null,"included_js_libs":"legacy_chartjs"}